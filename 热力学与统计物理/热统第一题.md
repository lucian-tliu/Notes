系统的哈密顿量为
$$
\newcommand \bm \boldsymbol
\newcommand \la \langle
\newcommand \ra \rangle

\bm{H}=\varepsilon\sum_{i=1}^{N}\bm{e}_i
$$
其中算符 $\bm{e}_i$ 表示第 $i$ 个格点上有无电子，它有两个本征值：$0$ 和 $1$。再考虑到电子有两个自旋，本征值 $1$ 是二重简并的 

| 本征值 | 本征矢                                                   |
| ------ | -------------------------------------------------------- |
| $0$    | $|0\ra$                                                  |
| $1$    | $|1\ra\otimes|\uparrow\ra$，$|1\ra\otimes|\downarrow\ra$ |

> [!caution]
>
> 由于自旋是电子的固有属性，而不是整个空间的背景自由度，当一个格点没有电子时，就没有自旋自由度。所以对于本征值 $0$，不会出现 $|0\ra\otimes|\uparrow\ra$，$|0\ra\otimes|\downarrow\ra$ 这样的二重简并。

表示系统总电子数的算符为
$$
\bm{n}=\sum_{i=1}^{N}\bm{e}_i
$$
因此，系统的巨配分函数为
$$
\begin{aligned}
\Xi&=\Tr\big[\exp\left({-\alpha\bm{n}-\beta\bm{H}}\right)\big]\\
&=\Tr\left[\exp\left(-\beta(\varepsilon-\mu)\sum_{i=1}^{N}\bm{e}_i\right)\right]\\
&=\Tr\left[\prod_{i=1}^{N}\mathrm{e}^{-\beta(\varepsilon-\mu)\bm{e}_i}\right]\\
&=\prod_{i=1}^{N}\Tr\left[\mathrm{e}^{-\beta(\varepsilon-\mu)\bm{e}_i}\right]
\end{aligned}
$$
其中
$$
\begin{aligned}
\Tr\left[\mathrm{e}^{-\beta(\varepsilon-\mu)\bm{e}_i}\right]&=\la 0|\mathrm{e}^{-\beta(\varepsilon-\mu)\bm{e}_i}|0\ra+\la \uparrow|\mathrm{e}^{-\beta(\varepsilon-\mu)\bm{e}_i}|\uparrow\ra+\la \downarrow|\mathrm{e}^{-\beta(\varepsilon-\mu)\bm{e}_i}|\downarrow\ra\\
&=1+2\mathrm{e}^{-\beta(\varepsilon-\mu)}
\end{aligned}
$$
最终
$$
\Xi=\left(1+2\mathrm{e}^{-\beta(\varepsilon-\mu)}\right)^N
$$

> [!note]
>
> 按照上面的方法容易得到，如果格点上是自旋为 $S$ 的粒子，则巨配分函数为
> $$
> \Xi=\left(1+(2S+1)\mathrm{e}^{-\beta(\varepsilon-\mu)}\right)^N
> $$
> 然而当我们考察算符 $\bm{H}$ 和 $\bm{n}$ 时会发现它们与粒子的自旋都没有关系。实际上自旋的影响在我们在Hilbert空间求迹(trace)时引入。
>
> 换句话说，自旋虽然不影响哈密顿量但影响Hilbert空间的结构。相同的哈密顿量并不保证同一物理结果，如果Hilbert空间结构不同，则物理统计量也可能不同。
